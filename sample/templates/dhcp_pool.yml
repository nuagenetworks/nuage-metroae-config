name: DHCP Pool
description: First template set - Create a DHCP pool off a Subnet
template-version: 1.0
software-type: Nuage Networks VSD
software-version: 5.0.2
variables:
  - name: enterprise_name
    type: reference
  - name: domain_name
    type: reference
  - name: zone_name
    type: reference
  - name: subnet_name
    type: reference
  - name: min_address
    type: string
  - name: max_address
    type: string
  - name: dhcp_pool_type
    type: choice
    choices:
      - bridge
      - host
  - name: iptype
    type: choice
    choices:
      - dualstack
      - ipv4
      - ipv6
actions:
  - select-object:
      type: Enterprise
      by-field: name
      value: {{ enterprise_name }}
      actions:
        - select-object:
            type: Domain
            by-field: name
            value: {{ domain_name }}
            actions:
              - select-object:
                  type: Zone
                  by-field: name
                  value: {{ zone_name }}
                  actions:
                    - select-object:
                        type: Subnet
                        by-field: name
                        value: {{ subnet_name }}
                        actions:
                          - create-object:
                              type: AddressRange
                              select-by-field: minAddress
                              actions:
                                - set-values:
                                    minAddress: {{ min_address }}
                                    maxAddress: {{ max_address }}
                                    DHCPPoolType: {{ dhcp_pool_type | upper }}
                                    IPType: {{ iptype | upper }}
